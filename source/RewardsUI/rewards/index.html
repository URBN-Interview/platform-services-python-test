{% load static %}

<!DOCTYPE html>
<html lang="en">

<head>
    <title>{% block title %}Rewards Dashboard{% endblock %}</title>
    <link rel="shortcut icon" href="#" />
    <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.4.1/css/bootstrap.min.css"
        integrity="sha384-Vkoo8x4CGsO3+Hhxv8T/Q5PaXtkKtu6ug5TOeNV6gBiFeWPGFN9MuhOf23Q9Ifjh" crossorigin="anonymous">
    <link  rel="stylesheet" href="{% static 'rewards/index.css' %}">
    {% block script %}
    {% endblock %}
</head>
<body>
    <h1>Welcome to the Rewards Dashboard</h1>
    <div>
        <h2>Reward Tiers</h2>
        <table class="table table-striped table-bordered">
            <thead>
                <tr>
                    <th scope="col">Rewards Tier</th>
                    <th scope="col">Reward Points</th>
                    <th scope="col">Rewards Tier Name</th>
                </tr>
            </thead>
            {% for reward in rewards_data %}
                <tr>
                    <td>{{ reward.tier }}</td>
                    <td>{{ reward.points }}</td>
                    <td>{{ reward.rewardName }}</td>
                </tr>
            {% endfor %}
        </table>
        <hr>
    </div>
    <div>
        <h2>Add orders</h2>
        <form action="{% url 'add_order' %}" method=post>
            {% csrf_token %}
            <div class="form-group">
                <input autofocus class="form-control" name="email" type="email" placeholder="Email address" required/><br>
            </div>
            <div class="form-group">
                <input autofocus class="form-control" name="order_total" type=number step=0.01 placeholder="Order total" required/>
            </div>
            <input class="btn btn-primary" type="submit" value="Submit Order"/>
        </form>
        <hr>
    </div>
    <div>
        <h2>User Rewards</h2>
        <form action="{% url 'search_user' %}" method=get>
            <!-- {% csrf_token %} -->
            <div class="form-group">
                <input autofocus class="form-control" name="email" type="email" placeholder="Email address" required/>
            </div>
            <div class="form-group">
                <input class="btn btn-primary" type="submit" value="Search"/>
            </div>
        </form>
        <br>
        <table class="table table-striped table-bordered">
            <thead>
                <tr>
                    <th scope="col">Email Address</th>
                    <th scope="col">Reward Points</th>
                    <th scope="col">Reward Tier</th>
                    <th scope="col">Reward Tier Name</th>
                    <th scope="col">Next Reward Tier</th>
                    <th scope="col">Next Reward Tier Name</th>
                    <th scope="col">Next Reward Tier Progress</th>
                </tr>
            </thead>
            <tbody>
            {% for user in user_data %}
                <tr>
                    <td>{{ user.email }}</td>
                    <td>{{ user.rewardPoints }}</td>
                    <td>{{ user.rewardTier }}</td>
                    <td>{{ user.rewardTierName }}</td>
                    <td>{{ user.nextRewardTier }}</td>
                    <td>{{ user.nextRewardTierName }}</td>
                    <td>{{ user.nextRewardTierProgress }}</td>
                </tr>
            {% endfor %}
            </tbody>
    </div>
</body>
</html>